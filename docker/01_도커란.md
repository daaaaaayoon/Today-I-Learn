# Docker Introduction

## 🐳 도커란?

리눅스 컨테이너에 여러 기능을 추가함으로써 애플리케이션을 컨테이너로서 좀 더 쉽게 사용할 수 있게 만들어진 오픈소스 프로젝트

- Go언어로 작성됨

## 🐳 가상화 방식 : 가상 머신과 도커 컨테이너

<img width="704" alt="스크린샷 2021-08-04 오후 8 05 54" src="https://user-images.githubusercontent.com/53184797/128170892-50f17fdc-6587-4ef9-bc05-668e51fa50ad.png">

### 1️⃣ 가상 머신

- **하이퍼바이저를 이용해 여러 개의 운영체제를 하나의 호스트에서 생성**해 사용하는 방식
- 만들어진 여러 개의 운영체제는 가상 머신이라는 단위로 구별되고, 각 가상머신에는 우분투, CentOS 등의 운영체제가 설치되어 사용된다.
- 하이퍼바이저를 통해 생성되고 관리되는 운영체제(=게스트 운영체제)는 다른 게스트 운영체제와 **완전히 독립된 공간과 시스템 자원을 할당받아 사용**한다.
- ex) VirtualBox, VMware

- 모두 하이퍼바이저를 거쳐 자원을 가상화하고 독립된 공간을 생성하기 때문에 일반 호스트에 비해 **성능의 손실 발생**
- 운영체제를 사용하기 위한 **라이브러리, 커널을 모두 포함** → 배포 위한 **이미지 크기가 큼**

- **결론 : 완벽한 운영체제를 생성할 수 있다는 장점이 있지만, 일반 호스트에 비해 성능 손실이 있으며, 크기가 큰 이미지를 애플리케이션으로 배포하기에는 부담스럽다는 단점이 있음**

### 2️⃣ 도커 컨테이너

- 가상화된 공간을 생성하기 위해 리눅스 자체 기능인 chroot, namespace, cgroup을 사용 → 프로세스 단위의 격리 환경을 만듬 → **성능의 손실이 거의 없다**
- 컨테이너에 필요한 커널은 호스트의 커널을 공유해서 사용, 컨테이너 안에는 애플리케이션을 구동하는데 필요한 라이브러리 및 실행파일만 존재 → **이미지의 용량이** 가상머신에 비해 **대폭 줄어듬**
- **결론 : 이미지의 용량이 작기 때문에 이미지를 배포하는 시간이 가상 머신에 비해 빠르며, 가상화된 공간을 사용할 때의 성능 손실도 거의 없음**

## 🐳 왜 도커인가?

1. 애플리케이션 개발과 배포의 편리
    - 독립된 개발 환경 : 도커 컨테이너는 호스트 OS(서버를 부팅할 때 실행되는 운영체제) 위에서 실행되는 격리된 공간 → 컨테이너 자체에 특별한 권한을 주지 않는 한, 호스트 OS에는 영향이 없다.
    - 배포의 편리 : '도커 이미지'라고 하는 일종의 패키지만 운영 서버에 전달하면 의존성 걱정없이 사용 가능
2. 애플리케이션의 독립성과 확장성이 높아짐
    1. 모놀리스(Monolith) 애플리케이션 : 여러 모듈이 상호 작용하는 로직을 하나의 프로그램 내에서 구동시키는 방식
    2. 마이크로서비스 구조 : 여러 모듈을 독립된 형태로 구성

    - **컨테이너**는 수 초 내로 생성, 시작이 가능할 뿐만 아니라 여러 모듈에게 독립된 환경을 동시에 제공할 수 있기 때문에 **마이크로서비스 구조에서 많이 사용되는 가상화 기술**
    - ⇒ 마이크로서비스 구조를 직접 구현하기보다는 도커 스웜 모드,  쿠버네티스 등의 컨테이너 플랫폼을 통해 사용하는 것이 일반적

## 🐳 도커 엔진 설치

### Docker for Mac

- [Docker for Mac](https://docs.docker.com/docker-for-mac/install/)

- <img width="690" alt="스크린샷 2021-08-04 오후 8 06 01" src="https://user-images.githubusercontent.com/53184797/128170868-06df395e-81c2-4c5a-a21e-2cf039cd7375.png">

### 리눅스 환경에서 도커 마련 추천

도커는 리눅스에서 작동하는데 최적화되어있음

→ 윈도우나 맥에서 도커를 사용하면 일부 제약이 있을 수 있음

→ VirtualBox, VMWare나 AWS EC2를 이용해 리눅스 환경에서 도커를 사용해보는 것을 추천